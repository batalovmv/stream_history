name: Deploy Vercel (CLI)
on:
push:
branches: [ main ]


jobs:
deploy:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- uses: actions/setup-node@v4
with: { node-version: 20, cache: 'npm' }
- run: npm ci
- name: Build
env:
VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
run: npm run build
- name: Vercel deploy (prebuilt)
run: |
npm i -g vercel@latest
vercel pull --yes --environment=production --token=${{ secrets.VERCEL_TOKEN }}
vercel deploy --prebuilt --prod \
--token=${{ secrets.VERCEL_TOKEN }} \
--scope ${{ secrets.VERCEL_ORG_ID }} \
--project ${{ secrets.VERCEL_PROJECT_ID }}